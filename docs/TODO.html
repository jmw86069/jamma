<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>TODO for jamma • jamma</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script>




<meta property="og:title" content="TODO for jamma" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-title-body">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">jamma</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.16.900</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="articles/jamma-vignette.html">Introduction to jamma</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://github.com/jmw86069/jamma/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>TODO for jamma</h1>
    </div>

<div id="todo-for-jamma" class="section level1">

<div id="new-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#new-functions" class="anchor"></a>New functions</h2>
<ul>
<li>
<code>jammaplotDispEsts()</code> wrapper for <code><a href="https://rdrr.io/pkg/DESeq2/man/plotDispEsts.html">DESeq2::plotDispEsts()</a></code>, although this function needs the newer colorized <code>plotSmoothScatterG2()</code>.</li>
</ul>
</div>
<div id="compatibility-with-summarizedexperiment" class="section level2">
<h2 class="hasAnchor">
<a href="#compatibility-with-summarizedexperiment" class="anchor"></a>compatibility with SummarizedExperiment</h2>
</div>
<div id="bug-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes" class="anchor"></a>Bug fixes</h2>
<ul>
<li>
<code><a href="reference/jammaplot.html">jammaplot()</a></code> argument <code>ablineV</code> is not functioning properly.</li>
<li>
<code><a href="reference/jammaplot.html">jammaplot()</a></code> highlight legend is not using <code>highlightPch</code>.</li>
</ul>
</div>
<div id="vignettes" class="section level2">
<h2 class="hasAnchor">
<a href="#vignettes" class="anchor"></a>Vignettes</h2>
<ol>
<li>Guides for MA-plots.</li>
</ol>
<ul>
<li>
<p>Basic guide to MA-plots for gene expression data.</p>
<ul>
<li><p>check data normality, apply appropriate transform, normalize data</p></li>
<li><p>check within-group variability</p></li>
<li><p>highlight points</p></li>
<li>
<p>common patterns and what they mean:</p>
<ul>
<li>shifted up/down</li>
<li>skewed up/down</li>
<li>low signal-to-noise, no signal</li>
<li>the 45-degree lines</li>
<li>batch effects</li>
<li>technical versus biological controls</li>
</ul>
</li>
<li><p>non-parametric (rank-based) MA-plot</p></li>
</ul>
</li>
<li><p>When to do use <code>centerGroups</code>, <code>controlSamples</code>.</p></li>
<li><p>How to interpret global-, group-, and technical replicate-centered data.</p></li>
<li><p>How to detect sample outliers using a MAD factor threshold.</p></li>
<li><p>How to guide data normalization by MA-plot review.</p></li>
</ul>
</div>
<div id="useful-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#useful-functions" class="anchor"></a>useful functions</h2>
<ul>
<li>
<p><code>log2fold_to_fold()</code> and <code>fold_to_log2fold()</code> - to interconvert:</p>
<ul>
<li>normal space fold changes, which could be represented as positive and negative values (e.g. 2-fold and -2-fold) or as ratios (e.g. 2-fold and 0.5-fold); and</li>
<li>log2 fold change values</li>
<li>Consider <code>fold_sign()</code> function that takes either as input and returns either <code>1</code> or <code>-1</code>, and by default never returns <code>0</code> since 1-fold change cannot easily be multiplied by its <code>fold_sign()</code> without causing it to become zero. More thought to be had as to the workflow.</li>
</ul>
</li>
</ul>
</div>
<div id="interface-with-other-r-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#interface-with-other-r-packages" class="anchor"></a>Interface with other R packages</h2>
<div id="deseq2" class="section level3">
<h3 class="hasAnchor">
<a href="#deseq2" class="anchor"></a>DESeq2</h3>
<ul>
<li>
<code>plotMA()</code> is used for the <code><a href="https://rdrr.io/pkg/DESeq2/man/DESeqResults.html">DESeq2::DESeqResults</a></code> object, highlighting points that meet <code>alpha &lt; 0.1</code> by default.</li>
<li>Add new method to run <code><a href="reference/jammaplot.html">jammaplot()</a></code> on the count data, optionally transformed using their recommended approach, or use <code>useRank=TRUE</code>.</li>
</ul>
</div>
</div>
<div id="bug-fixes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes-1" class="anchor"></a>Bug fixes</h2>
<ul>
<li>
<p>Version 0.0.10.900 fixed a bug where rowGroupMeans() was used to center values, but used default <code>na.rm=FALSE</code>, which caused groups with missing values not to display a centered value for other non-NA samples. The new version should provide two options:</p>
<ol>
<li>Hide or display values where groups with n&gt;1 members have only one non-NA value. The reasoning is that the MA-plot is intended to show “difference from mean” and has far less utility when a fraction of rows has only one non-NA value in the group, thus emphasizing the display of “zero difference” in those samples. Hiding these values therefore helps display the variability where data is available to judge the difference from mean.</li>
<li>Hide groups with any NA values.</li>
</ol>
</li>
</ul>
</div>
<div id="refactoring-ideas" class="section level2">
<h2 class="hasAnchor">
<a href="#refactoring-ideas" class="anchor"></a>Refactoring ideas</h2>
<ul>
<li>Consider using <code><a href="https://rdrr.io/pkg/jamba/man/rowGroupMeans.html">jamba::rowGroupMeans()</a></code> within <code><a href="reference/centerGeneData.html">centerGeneData()</a></code> which would allow optional outlier detection, which could substantially improve the quality of MA-plot panels.</li>
<li>
<code>jammagg()</code> or something similarly named, to produce a ggplot2 object.</li>
<li>One goal for ggplot2 output is to produce interactive visualizations with plotly; however, if that is not sufficient for the desired properties, e.g. useful hover text over the smooth scatter density, then a custom interactive plot function may be needed, for example direct calls to plotly instead of using the ggplotly wrapper function.</li>
</ul>
<div id="update-to-handle-summarizedexperiment-objects" class="section level3">
<h3 class="hasAnchor">
<a href="#update-to-handle-summarizedexperiment-objects" class="anchor"></a>Update to handle SummarizedExperiment objects</h3>
<ul>
<li>centerGroups should be able to take colnames from colData(x) to define groupings.</li>
<li>
<code>jammaplot.SE()</code> could be specific to SummarizedExperiment objects. It would require the names(assays(SE)) to define the data matrix to use. It could even recognize sample groups from <code>colData(SE)</code>, or from internal design matrix used for statistical testing.</li>
</ul>
</div>
<div id="highlighted-points" class="section level3">
<h3 class="hasAnchor">
<a href="#highlighted-points" class="anchor"></a>Highlighted points</h3>
<ul>
<li>Consider allowing highlighted points per panel, for example, showing gene hits only in the panels relevant to that comparison. However, there is a workaround, using <code>whichSamples</code> which will create the MA-plot data, but only display the samples of interest.</li>
</ul>
</div>
<div id="color-legend-for-highlighted-points" class="section level3">
<h3 class="hasAnchor">
<a href="#color-legend-for-highlighted-points" class="anchor"></a>Color legend for highlighted points</h3>
<ul>
<li>Add optional color legend at bottom of the figure labeling the colors highlighted on the plot.</li>
</ul>
</div>
<div id="enhance-the-returned-data" class="section level3">
<h3 class="hasAnchor">
<a href="#enhance-the-returned-data" class="anchor"></a>Enhance the returned data</h3>
<ul>
<li>Currently returns a list of 2-column matrices</li>
<li>Return data.frame with properly labeled colnames</li>
<li>Add columns:
<ul>
<li>indicating the centerGroups value if defined</li>
<li>whether the sample is a control sample within its centerGroup</li>
<li>highlight label, highlight point color</li>
<li>title box color</li>
</ul>
</li>
</ul>
<p>User should be able to take the returned data.frame list, and make a tall data.frame sufficient for ggplot2, or sufficient to answer the question “What is that outlier datapoint?”</p>
</div>
<div id="interactive-plots-using-plotly" class="section level3">
<h3 class="hasAnchor">
<a href="#interactive-plots-using-plotly" class="anchor"></a>Interactive plots using plotly</h3>
<p>Future idea:</p>
<ul>
<li>Convert plotSmoothScatter to generate a heatmap-ready density plot for each panel.</li>
<li>For each cell in the panel, optionally update the label so it lists the point label(s) represented in that cell; alternatively simply label with the number of points represented.</li>
</ul>
</div>
<div id="accessory-function-to-select-points" class="section level3">
<h3 class="hasAnchor">
<a href="#accessory-function-to-select-points" class="anchor"></a>Accessory function to select points</h3>
<ul>
<li>A common workflow request stems from the question “What are those points?” A wrapper function was written to allow clicking twice inside an active plot device to define a rectangle, then returning the rownames of the corresponding points.</li>
<li>The steps above could be used to supply coordinates from something like R-shiny, to request the rownames of the points specified.</li>
</ul>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>



      <footer>
      <div class="copyright">
  <p>Developed by James Ward.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


